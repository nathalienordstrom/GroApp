{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nvar initialState = {\n  login: {\n    accessToken: null,\n    userId: 0,\n    username: null,\n    statusMessage: \"\"\n  }\n};\nexport var user = createSlice({\n  name: \"user\",\n  initialState: initialState,\n  reducers: {\n    setAccessToken: function setAccessToken(state, action) {\n      var accessToken = action.payload.accessToken;\n      console.log(\"Access Token: \" + accessToken);\n      state.login.accessToken = accessToken;\n    },\n    setUserId: function setUserId(state, action) {\n      var userId = action.payload.userId;\n      console.log(\"User Id: \" + userId);\n      state.login.userId = userId;\n    },\n    setUsername: function setUsername(state, action) {\n      var username = action.payload.username;\n      state.login.username = username;\n    },\n    setStatusMessage: function setStatusMessage(state, action) {\n      var statusMessage = action.payload.statusMessage;\n      console.log(\"Status Message: \" + statusMessage);\n      state.login.statusMessage = statusMessage;\n    },\n    logout: function logout(state, action) {\n      console.log(\"Logging out\");\n      state.login.userId = 0;\n      state.login.accessToken = null;\n    }\n  }\n});\nvar SIGNUP_URL = \"http://localhost:8080/users\";\nexport var userSignup = function userSignup(username, password) {\n  return function (dispatch) {\n    fetch(SIGNUP_URL, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: username,\n        password: password\n      })\n    }).then(function (res) {\n      if (!res.ok) {\n        throw new Error(\"Sign up failed. Please enter a valid username and password\");\n      }\n\n      return res.json();\n    }).then(function (json) {\n      dispatch(user.actions.setAccessToken({\n        accessToken: json.accessToken\n      }));\n      dispatch(user.actions.setUserId({\n        userId: json.userId\n      }));\n      dispatch(user.actions.setUsername({\n        username: json.username\n      }));\n      dispatch(user.actions.setStatusMessage({\n        statusMessage: json.statusMessage\n      }));\n    }).catch(function (error) {\n      dispatch(user.actions.setUsername({\n        username: null\n      }));\n      dispatch(user.actions.setErrorMessage({\n        errorMessage: error.toString()\n      }));\n    });\n  };\n};\nexport var userLogin = function userLogin(username, password) {\n  return function (dispatch) {\n    fetch(\"http://localhost:8080/sessions\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username: username,\n        password: password\n      })\n    }).then(function (res) {\n      if (!res.ok) {\n        throw new Error(\"Login failed. Please check your username and password\");\n      }\n\n      return res.json();\n    }).then(function (json) {\n      dispatch(user.actions.setAccessToken({\n        accessToken: json.accessToken\n      }));\n      dispatch(user.actions.setUserId({\n        userId: json.userId\n      }));\n      dispatch(user.actions.setUsername({\n        username: json.username\n      }));\n      dispatch(user.actions.setStatusMessage({\n        statusMessage: json.statusMessage\n      }));\n    }).catch(function (error) {\n      dispatch(user.actions.setUsername({\n        username: null\n      }));\n      dispatch(user.actions.setErrorMessage({\n        errorMessage: error.toString()\n      }));\n    });\n  };\n};","map":{"version":3,"sources":["/Users/nathalienordstrom/Desktop/GroApp/GroApp/frontend/reducers/user.js"],"names":["createSlice","initialState","login","accessToken","userId","username","statusMessage","user","name","reducers","setAccessToken","state","action","payload","console","log","setUserId","setUsername","setStatusMessage","logout","SIGNUP_URL","userSignup","password","dispatch","fetch","method","headers","body","JSON","stringify","then","res","ok","Error","json","actions","catch","error","setErrorMessage","errorMessage","toString","userLogin"],"mappings":"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","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst initialState = {\n  login: {\n    accessToken: null,\n    userId: 0,\n    username: null,\n    statusMessage: \"\",\n  },\n};\n\nexport const user = createSlice({\n  name: \"user\",\n  initialState: initialState,\n  reducers: {\n    setAccessToken: (state, action) => {\n      const { accessToken } = action.payload;\n      console.log(`Access Token: ${accessToken}`);\n      state.login.accessToken = accessToken;\n    },\n    setUserId: (state, action) => {\n      const { userId } = action.payload;\n      console.log(`User Id: ${userId}`);\n      state.login.userId = userId;\n    },\n    setUsername: (state, action) => {\n      const { username } = action.payload;\n      state.login.username = username;\n  },\n    setStatusMessage: (state, action) => {\n      const { statusMessage } = action.payload;\n      console.log(`Status Message: ${statusMessage}`);\n      state.login.statusMessage = statusMessage;\n    },\n    logout: (state, action) => {\n      console.log(\"Logging out\");\n      state.login.userId = 0;\n      state.login.accessToken = null;\n    },\n  },\n});\n\n\nconst SIGNUP_URL = \"http://localhost:8080/users\";\n\nexport const userSignup = (username, password) => {\n    return(dispatch) => {\n        fetch(SIGNUP_URL, {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\"},\n            body: JSON.stringify({ username, password }),\n        })\n        .then((res) => {\n            if(!res.ok) {\n                throw new Error(\n                    \"Sign up failed. Please enter a valid username and password\"\n                );\n            } return res.json();\n        })\n        .then((json) => {\n            dispatch(user.actions.setAccessToken({ accessToken: json.accessToken })); \n            dispatch(user.actions.setUserId({ userId: json.userId}));\n            dispatch(user.actions.setUsername({ username: json.username }));        \n            dispatch(user.actions.setStatusMessage({ statusMessage: json.statusMessage}));      \n        })\n        .catch((error) => { \n            dispatch(user.actions.setUsername({ username: null }));\n            dispatch(user.actions.setErrorMessage({ errorMessage: error.toString()}));\n        })\n\n    }\n}\n\nexport const userLogin = (username, password) => {\n  return(dispatch) => {\n      fetch(\"http://localhost:8080/sessions\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ username, password }),\n      })\n      .then((res) => {\n          if(!res.ok) {\n              throw new Error(\n                  \"Login failed. Please check your username and password\"\n              );\n          } return res.json(); \n      })               \n      .then((json) => {\n          dispatch(user.actions.setAccessToken({ accessToken: json.accessToken }));\n          dispatch(user.actions.setUserId({ userId: json.userId}));      \n          dispatch(user.actions.setUsername({ username: json.username }));        \n          dispatch(user.actions.setStatusMessage({ statusMessage: json.statusMessage})); \n      })\n      .catch((error) => { \n          dispatch(user.actions.setUsername({ username: null }));\n          dispatch(user.actions.setErrorMessage({ errorMessage: error.toString()}));\n      })\n  };\n};"]},"metadata":{},"sourceType":"module"}